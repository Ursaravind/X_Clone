{% load static %}
{% load django_browser_reload %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home / X Clone</title>
    <link href="{% static 'css/dist/styles.css' %}" rel="stylesheet">
    {% django_browser_reload_script %}

    <style>
        /* Specific X-theme CSS for better text/link appearance */
        .text-x-blue {
            color: #1d9bf0;
        }

        .hover\:bg-gray-800\/50:hover {
            background-color: rgba(33, 33, 33, 0.5);
        }
    </style>
</head>

<body class="bg-black text-white">

    <div class="flex min-h-screen max-w-7xl mx-auto">

        <div class="w-[17rem] max-w-xs sticky top-0 h-screen p-4 flex flex-col justify-between border-r border-gray-800">
            <nav class="text-gray-300  sticky">
                <div class="p-3 mb-4">
                    <svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg" class="w-7 h-7">
                        <path
                            d="M21.742 21.75l-7.563-11.179 7.056-8.321h-2.456l-5.691 6.714-4.54-6.714H2.359l7.29 10.776L2.25 21.75h2.456l6.035-7.118 4.818 7.118h6.191h-0.008ZM7.739 3.818L18.81 20.182h-2.447L5.29 3.818h2.447Z" />
                    </svg>
                </div>
                {% include 'core/includes/nav_links.html' %}
            </nav>
            <path
                d="M12 1.75c-5.1 0-9.25 4.15-9.25 9.25s4.15 9.25 9.25 9.25 9.25-4.15 9.25-9.25S17.1 1.75 12 1.75Zm-1.5 12.5h3a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5Zm-1.5-3h6a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1 0-1.5Zm0-3h6a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1 0-1.5Z">
            </path>
            <button
                class="w-3/4 py-3 mt-4 text-lg font-bold bg-white text-black rounded-full transition duration-200">
                Post
            </button>

            <a href="#" class="mt-4 p-3 flex items-center hover:bg-gray-800/50 rounded-full transition duration-150">
                <img src="{% if user_profile.profile_photo %}{{ user_profile.profile_photo.url }}{% else %}{% static 'path/to/default_avatar.png' %}{% endif %}"
                    alt="Avatar" class="w-10 h-10 rounded-full mr-3">
                <div class="flex flex-col text-sm">
                    <span class="font-bold">{{ user_profile.display_name|default:user_profile.username }}</span>
                    <span class="text-gray-500">@{{ user_profile.username }}</span>
                </div>
            </a>
        </div>


        <main class="w-1/2 min-w-[600px] border-r border-gray-800">

            <header
                class="sticky top-0 bg-black/80 backdrop-blur-sm z-10 border-b border-gray-800 flex justify-around text-center">
                <div class="w-full p-4 hover:bg-gray-800/50 cursor-pointer transition duration-150">
                    <span class="font-bold border-b-4 border-blue-500 pb-4">For You</span>
                </div>
                <div class="w-full p-4 text-gray-500 hover:bg-gray-800/50 cursor-pointer transition duration-150">
                    <span class="font-bold">Following</span>
                </div>
            </header>

            <div class="p-4 border-b border-gray-800">
                <div class="flex space-x-3">
                    <img src="{% if user_profile.profile_photo %}{{ user_profile.profile_photo.url }}{% else %}{% static 'path/to/default_avatar.png' %}{% endif %}"
                        alt="Avatar" class="w-10 h-10 rounded-full">

                    <form method="POST" enctype="multipart/form-data" class="flex-grow flex flex-col">
                        {% csrf_token %}

                        {{ tweet_form.content }}

                        <div class="flex justify-between items-center pt-3 border-t border-gray-800 mt-2">

                            <div class="flex space-x-2 items-center text-x-blue">

                                <label for="{{ tweet_form.image.id_for_label }}"
                                    class="cursor-pointer p-2 rounded-full text-blue-500 hover:bg-blue-500/10 transition duration-150">
                                    <svg viewBox="0 0 24 24" aria-hidden="true" class="w-5 h-5 fill-current">
                                        <g>
                                            <path
                                                d="M19.75 2H4.25C3.01 2 2 3.01 2 4.25v15.5C2 20.99 3.01 22 4.25 22h15.5c1.24 0 2.25-1.01 2.25-2.25V4.25C22 3.01 20.99 2 19.75 2zM4.25 4h15.5c.14 0 .25.11.25.25v15.5c0 .14-.11.25-.25.25H4.25c-.14 0-.25-.11-.25-.25V4.25c0-.14.11-.25.25-.25zM6 17.22l4.25-4.25 2.22 2.22c.1.1.25.15.4 0l4.67-4.67 1.35 1.35V19.75c0 .14-.11.25-.25.25H4.25c-.14 0-.25-.11-.25-.25V17.22zm11.75-10a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5z">
                                            </path>
                                        </g>
                                    </svg>
                                </label>
                                {{ tweet_form.image }}

                            </div>

                            <button type="submit" id="post-button" class="px-4 py-2 text-sm font-bold bg-white text-black rounded-full transition duration-200">
                                Post
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="tweets-feed">

                {% if suggested_users %}
                <div class="p-8 text-center border-b border-gray-800">
                    <h2 class="text-xl font-bold mb-4">Welcome to X Clone!</h2>
                    <p class="text-gray-500 mb-6">
                        
                        Start following people to see their tweets here. Here are some suggestions:
                    </p>

                    <div class="space-y-4">
                        {% for suggested_user in suggested_users %}
                        <div
                            class="flex items-center justify-between p-3 hover:bg-gray-900 rounded-lg transition duration-150">
                            <div class="flex items-center space-x-3">
                                <img src="{% if suggested_user.profile_photo %}{{ suggested_user.profile_photo.url }}{% else %}{% static 'path/to/default_avatar.png' %}{% endif %}"
                                    alt="Avatar" class="w-10 h-10 rounded-full">
                                <div>
                                    <span class="block font-bold"> {{suggested_user.display_name|default:suggested_user.username}} </span>
                                    <span class="block text-gray-500 text-sm">@{{ suggested_user.username }}</span>
                                </div>
                            </div>
                            <a href="{% url 'follow_user' suggested_user.username %}"
                                class="px-4 py-1.5 font-bold bg-white text-black rounded-full hover:bg-gray-200 transition duration-150">Follow</a>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}


                {% for tweet in feed_tweets %}
                <div
                    class="tweet p-4 border-b border-gray-800 hover:bg-gray-900/50 cursor-pointer transition duration-150">
                    <div class="flex space-x-3">
                        <img src="{% if tweet.user.profile_photo %}{{ tweet.user.profile_photo.url }}{% else %}{% static 'path/to/default_avatar.png' %}{% endif %}"
                            alt="Avatar" class="w-5 h-5  rounded-full">

                        <div class="flex-grow">
                            <div class="flex items-center space-x-1 text-sm">
                                <span class="font-bold hover:underline">{{tweet.user.display_name|default:tweet.user.username }}</span>
                                <span class="text-gray-500">@{{ tweet.user.username }}</span>
                                <span class="text-gray-500">• {{ tweet.created_at|date:"M j" }}</span>
                            </div>

                            <p class="mt-1  whitespace-pre-wrap">{{ tweet.content }}</p>

                            {% if tweet.image %}
                            <div class="mt-3 rounded-xl overflow-hidden border border-gray-700 max-h-[500px]">
                                <img src="{{ tweet.image.url }}" alt="Tweet image" class="w-full object-cover">
                            </div>
                            {% endif %}

                            <div class="flex justify-between mt-3 text-gray-500 max-w-sm mx-auto">
                                <div class="flex items-center hover:text-blue-500 group">
                                    <svg class="w-5 h-5 group-hover:bg-blue-500/10 p-1 rounded-full" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                    </svg>
                                    <span class="ml-1 text-sm">412</span>
                                </div>
                                <div class="flex items-center hover:text-green-500 group">
                                    <svg class="w-5 h-5 group-hover:bg-green-500/10 p-1 rounded-full"
                                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round">
                                        <path
                                            d="M23 4v6h-3V4zm-1 10h3v-6h-3v6zM4 12V4h12M4 12h12M4 12V4M12 20h8v-8M12 20V4M12 20h8v-8">
                                        </path>
                                    </svg>
                                    <span class="ml-1 text-sm">213</span>
                                </div>
                                <div class="flex items-center hover:text-pink-500 group">
                                    <svg class="w-5 h-5 group-hover:bg-pink-500/10 p-1 rounded-full" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path
                                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                                        </path>
                                    </svg>
                                    <span class="ml-1 text-sm">6.6K</span>
                                </div>
                                <div class="flex items-center hover:text-blue-500 group">
                                    <svg class="w-5 h-5 group-hover:bg-blue-500/10 p-1 rounded-full" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <circle cx="18" cy="5" r="3"></circle>
                                        <circle cx="6" cy="12" r="3"></circle>
                                        <circle cx="18" cy="19" r="3"></circle>
                                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% empty %}
                {% if not suggested_users %}
                <div class="p-8 text-center text-gray-500">
                    <p class="text-lg font-semibold mb-2">No tweets yet!</p>
                    <p>The accounts you follow haven't posted anything recently.</p>
                    <p class="mt-4">Try posting your first tweet!</p>
                </div>
                {% endif %}
                {% endfor %}

            </div>

        </main>

        <div class="w-1/4 max-w-xs p-4 sticky top-0 h-screen">
            <div class="mb-4">
                <input type="search" placeholder="Search"
                    class="w-full py-2 px-4 bg-gray-800 rounded-full text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <div class="bg-gray-800/50 p-4 rounded-xl mb-4">
                <h2 class="text-xl font-extrabold mb-2">Subscribe to Premium</h2>
                <p class="text-sm mb-3">Subscribe to unlock new features and if eligible, receive a share of revenue.
                </p>
                <button
                    class="w-full py-2 font-bold bg-blue-500 hover:bg-blue-600 rounded-full text-white transition duration-200">
                    Subscribe
                </button>
            </div>

            <div class="bg-gray-800/50 p-4 rounded-xl">
                <h2 class="text-xl font-extrabold mb-4">Today's News</h2>
                <div class="space-y-3">
                    <div class="hover:bg-gray-800 p-2 -m-2 rounded-lg cursor-pointer transition duration-150">
                        <p class="text-xs text-gray-500">1 day ago · Entertainment</p>
                        <p class="font-bold">Victoria's Secret Fashion Show Revives with TWICE Debut...</p>
                    </div>
                    <div class="hover:bg-gray-800 p-2 -m-2 rounded-lg cursor-pointer transition duration-150">
                        <p class="text-xs text-gray-500">6 hours ago · News</p>
                        <p class="font-bold">Trump Claims Modi Assured End to Russian Oil Purchases</p>
                    </div>
                </div>
            </div>
        </div>

    </div>
</body>

</html>